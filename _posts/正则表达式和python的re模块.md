---
title: æ­£åˆ™è¡¨è¾¾å¼å’Œpythonçš„reæ¨¡å—
tags: pythonå…¨æ ˆå¼€å‘ï¼Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œreæ¨¡å—
grammar_cjkRuby: true
---
##### **ä¸€ æ­£åˆ™è¡¨è¾¾å¼**
æ­£åˆ™è¡¨è¾¾å¼(Regular Expression)æ˜¯ä¸€ç§æ–‡æœ¬æ¨¡å¼ï¼ŒåŒ…æ‹¬æ™®é€šå­—ç¬¦ï¼ˆä¾‹å¦‚ï¼Œa åˆ° z ä¹‹é—´çš„å­—æ¯ï¼‰å’Œç‰¹æ®Šå­—ç¬¦ï¼ˆç§°ä¸º"å…ƒå­—ç¬¦"ï¼‰ã€‚
æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨å•ä¸ªå­—ç¬¦ä¸²æ¥æè¿°ã€åŒ¹é…ä¸€ç³»åˆ—åŒ¹é…æŸä¸ªå¥æ³•è§„åˆ™çš„å­—ç¬¦ä¸²ã€‚æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç¹ççš„ï¼Œä½†å®ƒæ˜¯å¼ºå¤§çš„ï¼Œå­¦ä¼šä¹‹åçš„åº”ç”¨ä¼šè®©ä½ é™¤äº†æé«˜æ•ˆç‡å¤–ï¼Œä¼šç»™ä½ å¸¦æ¥ç»å¯¹çš„æˆå°±æ„Ÿã€‚
æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«ä¹Ÿå’Œpythonæ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œå°±æ˜¯åŒ¹é…å­—ç¬¦ä¸²å†…å®¹çš„ä¸€ç§è§„åˆ™ã€‚è®¸å¤šç¨‹åºè®¾è®¡è¯­è¨€éƒ½æ”¯æŒåˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå­—ç¬¦ä¸²æ“ä½œã€‚

å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªç”µè¯å·ç æ˜¯å¦æ˜¯åˆæ³•çš„å‘¢ï¼Ÿ
æ ¹æ®æ‰‹æœºå·ç ä¸€å…±11ä½å¹¶ä¸”æ˜¯åªä»¥13ã€14ã€15ã€18å¼€å¤´çš„æ•°å­—è¿™äº›ç‰¹ç‚¹ï¼Œæˆ‘ä»¬ç”¨pythonå†™äº†å¦‚ä¸‹ä»£ç ï¼š

``` python
while True:
    phone_number = input('please input your phone number ï¼š ')
    if len(phone_number) == 11 \
            and phone_number.isdigit()\
            and (phone_number.startswith('13') \
            or phone_number.startswith('14') \
            or phone_number.startswith('15') \
            or phone_number.startswith('18')):
        print('æ˜¯åˆæ³•çš„æ‰‹æœºå·ç ')
    else:
        print('ä¸æ˜¯åˆæ³•çš„æ‰‹æœºå·ç ')
```
å¦‚æœç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°ï¼Œä»£ç å°±ç®€å•å¾ˆå¤šã€‚ä»£ç å¦‚ä¸‹ï¼š

``` python
import re
phone_number = input('please input your phone number ï¼š ')
if re.match('^(13|14|15|17|18|19)[0-9]{9}$',phone_number):
        print('æ˜¯åˆæ³•çš„æ‰‹æœºå·ç ')
else:
        print('ä¸æ˜¯åˆæ³•çš„æ‰‹æœºå·ç ')
```
ç¬¬äºŒç§ä»£ç æ˜¯ä¸æ˜¯è¶…çº§ç®€å•ï¼Œä»Šå¤©å°±å­¦ä¹ ä¸‹æ­£åˆ™è¡¨è¾¾å¼å’Œpythonçš„reæ¨¡å—ã€‚

> ä¸ç®¡ä»¥åä½ æ˜¯ä¸æ˜¯å»åšpythonå¼€å‘ï¼Œåªè¦ä½ æ˜¯ä¸€ä¸ªç¨‹åºå‘˜å°±åº”è¯¥äº†è§£æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬ä½¿ç”¨ã€‚å¦‚æœæœªæ¥ä½ è¦åœ¨çˆ¬è™«é¢†åŸŸå‘å±•ï¼Œä½ å°±æ›´åº”è¯¥å¥½å¥½å­¦ä¹ è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚
ä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œreæ¨¡å—æœ¬è´¨ä¸Šå’Œæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰ä¸€æ¯›é’±çš„å…³ç³»ã€‚reæ¨¡å—å’Œæ­£åˆ™è¡¨è¾¾å¼çš„å…³ç³» ç±»ä¼¼äº timeæ¨¡å—å’Œæ—¶é—´çš„å…³ç³»
ä½ æ²¡æœ‰å­¦ä¹ pythonä¹‹å‰ï¼Œä¹Ÿä¸çŸ¥é“æœ‰ä¸€ä¸ªtimeæ¨¡å—ï¼Œä½†æ˜¯ä½ å·²ç»è®¤è¯†æ—¶é—´äº† 12:30å°±è¡¨ç¤ºä¸­åˆåäºŒç‚¹åŠï¼ˆè¿™ä¸ªæ—¶é—´å¯å¥½ï¼Œä¸€èˆ¬è¿™ä¼šå„¿å°±è¯¥ä¸‹è¯¾äº†ï¼‰ã€‚
æ—¶é—´æœ‰è‡ªå·±çš„æ ¼å¼ï¼Œå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼Œ12ä¸ªæœˆï¼Œ365å¤©......å·²ç»æˆä¸ºäº†ä¸€ç§è§„åˆ™ã€‚ä½ ä¹Ÿæ—©å°±ç‰¢è®°äºå¿ƒäº†ã€‚timeæ¨¡å—åªä¸è¿‡æ˜¯pythonæä¾›ç»™æˆ‘ä»¬çš„å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬æ“ä½œæ—¶é—´çš„ä¸€ä¸ªå·¥å…·è€Œå·²

###### æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•

> å­—ç¬¦ç»„ ï¼š [å­—ç¬¦ç»„]
åœ¨åŒä¸€ä¸ªä½ç½®å¯èƒ½å‡ºç°çš„å„ç§å­—ç¬¦ç»„æˆäº†ä¸€ä¸ªå­—ç¬¦ç»„ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ç”¨[]è¡¨ç¤º
å­—ç¬¦åˆ†ä¸ºå¾ˆå¤šç±»ï¼Œæ¯”å¦‚æ•°å­—ã€å­—æ¯ã€æ ‡ç‚¹ç­‰ç­‰ã€‚
å‡å¦‚ä½ ç°åœ¨è¦æ±‚ä¸€ä¸ªä½ç½®"åªèƒ½å‡ºç°ä¸€ä¸ªæ•°å­—",é‚£ä¹ˆè¿™ä¸ªä½ç½®ä¸Šçš„å­—ç¬¦åªèƒ½æ˜¯0ã€1ã€2...9è¿™10ä¸ªæ•°ä¹‹ä¸€ã€‚

| æ­£åˆ™ |   å¾…åŒ¹é…å­—ç¬¦  |  åŒ¹é…ç»“æœ  | è¯´æ˜    |
| ---- | --- | --- | --- |
| [0123456789]     |  8   |   True  |åœ¨ä¸€ä¸ªå­—ç¬¦ç»„é‡Œæšä¸¾åˆæ³•çš„æ‰€æœ‰å­—ç¬¦ï¼Œå­—ç¬¦ç»„é‡Œçš„ä»»æ„ä¸€ä¸ªå­—ç¬¦å’Œ"å¾…åŒ¹é…å­—ç¬¦"ç›¸åŒéƒ½è§†ä¸ºå¯ä»¥åŒ¹é…     |
|    [0-9]  |   7  |    True |  ä¹Ÿå¯ä»¥ç”¨-è¡¨ç¤ºèŒƒå›´,[0-9]å°±å’Œ[0123456789]æ˜¯ä¸€ä¸ªæ„æ€   |
|  [a-z]    |   a  |  True   |  åŒæ ·çš„å¦‚æœè¦åŒ¹é…æ‰€æœ‰çš„å°å†™å­—æ¯ï¼Œç›´æ¥ç”¨[a-z]å°±å¯ä»¥è¡¨ç¤º   |
|    [A-Z]  | A    |  True   |  [A-Z]å°±è¡¨ç¤ºæ‰€æœ‰çš„å¤§å†™å­—æ¯   |
|   [0-9a-fA-F]   |  e   |  True   |  å¯ä»¥åŒ¹é…æ•°å­—ï¼Œå¤§å°å†™å½¢å¼çš„aï½fï¼Œç”¨æ¥éªŒè¯åå…­è¿›åˆ¶ç¬¦ |
å­—ç¬¦ï¼š

| å…ƒå­—ç¬¦ | åŒ¹é…å†…å®¹                         |
| ------ | -------------------------------- |
| .      | åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦       |
| \w     | åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿(word)     |
| \s     | åŒ¹é…ä»»æ„çš„ç©ºç™½ç¬¦(space)          |
| \d     | åŒ¹é…æ•°å­—(digital)                |
| \n     | åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦                   |
| \t     | åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦                   |
| \b     | åŒ¹é…ä¸€ä¸ªå•è¯çš„ç»“å°¾               |
| ^      | åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œé™¤éåœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œæ­¤æ—¶å®ƒè¡¨ç¤ºä¸æ¥å—è¯¥å­—ç¬¦é›†åˆã€‚è¦åŒ¹é… ^ å­—ç¬¦æœ¬èº«ï¼Œè¯·ä½¿ç”¨ \^ã€‚                 |
| $      | åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“å°¾ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œåˆ™ $ ä¹ŸåŒ¹é… '\n' æˆ– '\r'ã€‚è¦åŒ¹é… $ å­—ç¬¦æœ¬èº«ï¼Œè¯·ä½¿ç”¨ \$ã€‚   |
| \W     | åŒ¹é…éå­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿         |
| \D     | åŒ¹é…éæ•°å­—                       |
| \S     | åŒ¹é…éç©ºç™½ç¬¦                     |
| a|b    | åŒ¹é…å­—ç¬¦aæˆ–å­—ç¬¦b                 |
| ()     | åŒ¹é…æ‹¬å·å†…çš„è¡¨è¾¾å¼ï¼Œä¹Ÿè¡¨ç¤ºä¸€ä¸ªç»„ |
| [...]  | åŒ¹é…å­—ç¬¦ç»„ä¸­çš„å­—ç¬¦               |
| [^...] | åŒ¹é…é™¤äº†å­—ç¬¦ç»„ä¸­å­—ç¬¦çš„æ‰€æœ‰å­—ç¬¦   |

é‡è¯ï¼š

> é™å®šç¬¦ç”¨æ¥æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªç»™å®šç»„ä»¶å¿…é¡»è¦å‡ºç°å¤šå°‘æ¬¡æ‰èƒ½æ»¡è¶³åŒ¹é…ã€‚æœ‰ * æˆ– + æˆ– ? æˆ– {n} æˆ– {n,} æˆ– {n,m}
> å…±6ç§ã€‚

| é‡è¯  | ç”¨æ³•è¯´æ˜         |
| ----- | ---------------- |
| *     | é‡å¤é›¶æ¬¡æˆ–æ›´å¤šæ¬¡ |
| +     | é‡å¤ä¸€æ¬¡æˆ–æ›´å¤šæ¬¡ |
| ï¼Ÿ    | åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼Œæˆ–æŒ‡æ˜ä¸€ä¸ªéè´ªå©ªé™å®šç¬¦ã€‚è¦åŒ¹é… ? å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ \?ã€‚ |
| {n}   | é‡å¤næ¬¡          |
| {n,}  | é‡å¤næ¬¡æˆ–æ›´å¤šæ¬¡  |
| {n,m} | é‡å¤nåˆ°mæ¬¡       |
çœ‹ä¸€äº›ä¾‹å­ï¼š* + ? { }

***ã€+é™å®šç¬¦éƒ½æ˜¯è´ªå©ªçš„ï¼Œå› ä¸ºå®ƒä»¬ä¼šå°½å¯èƒ½å¤šçš„åŒ¹é…æ–‡å­—ï¼Œåªæœ‰åœ¨å®ƒä»¬çš„åé¢åŠ ä¸Šä¸€ä¸ª?å°±å¯ä»¥å®ç°éè´ªå©ªæˆ–æœ€å°åŒ¹é…ã€‚**

ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æœç´¢ HTML æ–‡æ¡£ï¼Œä»¥æŸ¥æ‰¾æ‹¬åœ¨ H1 æ ‡è®°å†…çš„ç« èŠ‚æ ‡é¢˜ã€‚è¯¥æ–‡æœ¬åœ¨æ‚¨çš„æ–‡æ¡£ä¸­å¦‚ä¸‹ï¼š

==> \<H1>Chapter 1 - ä»‹ç»æ­£åˆ™è¡¨è¾¾å¼\</H1>==

è´ªå©ªï¼šä¸‹é¢çš„è¡¨è¾¾å¼åŒ¹é…ä»å¼€å§‹å°äºç¬¦å· (<) åˆ°å…³é—­ H1 æ ‡è®°çš„å¤§äºç¬¦å· (>) ä¹‹é—´çš„æ‰€æœ‰å†…å®¹ã€‚
==/<.*>/==
**éè´ªå©ªï¼šå¦‚æœæ‚¨åªéœ€è¦åŒ¹é…å¼€å§‹å’Œç»“æŸ H1 æ ‡ç­¾ï¼Œä¸‹é¢çš„éè´ªå©ªè¡¨è¾¾å¼åªåŒ¹é… <H1>**
> /<.*?>/

###### ==åˆ†ç»„ ()ä¸ æˆ– ï½œï¼»^ï¼½==
Â èº«ä»½è¯å·ç æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º15æˆ–18ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯15ä½åˆ™å…¨éƒ¨ğŸˆ¶ï¸æ•°å­—ç»„æˆï¼Œé¦–ä½ä¸èƒ½ä¸º0ï¼›å¦‚æœæ˜¯18ä½ï¼Œåˆ™å‰17ä½å…¨éƒ¨æ˜¯æ•°å­—ï¼Œæœ«ä½å¯èƒ½æ˜¯æ•°å­—æˆ–xï¼Œä¸‹é¢æˆ‘ä»¬å°è¯•ç”¨æ­£åˆ™æ¥è¡¨ç¤ºï¼š
![enter description here](http://futuretechx.com/wp-content/uploads/2018/11/15426067731.png)
###### ==è½¬ä¹‰ç¬¦ \==
åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œæœ‰å¾ˆå¤šæœ‰ç‰¹æ®Šæ„ä¹‰çš„æ˜¯å…ƒå­—ç¬¦ï¼Œæ¯”å¦‚\nå’Œ\sç­‰ï¼Œå¦‚æœè¦åœ¨æ­£åˆ™ä¸­åŒ¹é…æ­£å¸¸çš„"\n"è€Œä¸æ˜¯"æ¢è¡Œç¬¦"å°±éœ€è¦å¯¹"\"è¿›è¡Œè½¬ä¹‰ï¼Œå˜æˆ'\\'ã€‚åœ¨pythonä¸­ï¼Œæ— è®ºæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿˜æ˜¯å¾…åŒ¹é…çš„å†…å®¹ï¼Œéƒ½æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å‡ºç°çš„ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­\ä¹Ÿæœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œæœ¬èº«è¿˜éœ€è¦è½¬ä¹‰ã€‚æ‰€ä»¥å¦‚æœåŒ¹é…ä¸€æ¬¡"\n",å­—ç¬¦ä¸²ä¸­è¦å†™æˆ'\\n'ï¼Œé‚£ä¹ˆæ­£åˆ™é‡Œå°±è¦å†™æˆ"\\\\n",è¿™æ ·å°±å¤ªéº»çƒ¦äº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ç”¨åˆ°äº†r'\n'è¿™ä¸ªæ¦‚å¿µï¼Œæ­¤æ—¶çš„æ­£åˆ™æ˜¯r'\\n'å°±å¯ä»¥äº†ã€‚åœ¨å­—ç¬¦ä¸²ä¹‹å‰åŠ rï¼Œè®©æ•´ä¸ªå­—ç¬¦ä¸²ä¸è½¬ä¹‰
###### ==è´ªå©ªåŒ¹é…==
è´ªå©ªåŒ¹é…ï¼šåœ¨æ»¡è¶³åŒ¹é…æ—¶ï¼ŒåŒ¹é…å°½å¯èƒ½é•¿çš„å­—ç¬¦ä¸²ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé‡‡ç”¨è´ªå©ªåŒ¹é…
![enter description here](http://futuretechx.com/wp-content/uploads/2018/11/15426070921.png)
å‡ ä¸ªå¸¸ç”¨çš„éè´ªå©ªåŒ¹é…Pattern

> *? é‡å¤ä»»æ„æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤
+? é‡å¤1æ¬¡æˆ–æ›´å¤šæ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤
?? é‡å¤0æ¬¡æˆ–1æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤
{n,m}? é‡å¤nåˆ°mæ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤
{n,}? é‡å¤næ¬¡ä»¥ä¸Šï¼Œä½†å°½å¯èƒ½å°‘é‡å¤

.*?çš„ç”¨æ³•

> . æ˜¯ä»»æ„å­—ç¬¦
> \* æ˜¯å– 0 è‡³ æ— é™é•¿åº¦
> ? æ˜¯éè´ªå©ªæ¨¡å¼ã€‚
ä½•åœ¨ä¸€èµ·å°±æ˜¯ å–å°½é‡å°‘çš„ä»»æ„å­—ç¬¦ï¼Œä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆå•ç‹¬å†™ï¼Œä»–å¤§å¤šç”¨åœ¨ï¼š
.*?x
å°±æ˜¯å–å‰é¢ä»»æ„é•¿åº¦çš„å­—ç¬¦ï¼Œç›´åˆ°ä¸€ä¸ªxå‡ºç°
##### **äºŒ reæ¨¡å—**
å¸¸ç”¨çš„æ–¹æ³•

 **1. re.compile(pattern, flags=0)**
 ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿”å›RegexObjectå¯¹è±¡ï¼Œç„¶åå¯ä»¥é€šè¿‡RegexObjectå¯¹è±¡è°ƒç”¨match()å’Œsearch()æ–¹æ³•ã€‚
``` python
obj = re.compile('\d{3}')  #å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆä¸ºä¸€ä¸ª æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè§„åˆ™è¦åŒ¹é…çš„æ˜¯3ä¸ªæ•°å­—
ret = obj.search('abc123eeee') #æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡è°ƒç”¨searchï¼Œå‚æ•°ä¸ºå¾…åŒ¹é…çš„å­—ç¬¦ä¸²
print(ret.group())  #ç»“æœ ï¼š 123
```
**2. re.search(pattern, string, flags=0)**
åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ï¼Œæ˜¯å¦èƒ½åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚è¿”å›_sre.SRE_Matchå¯¹è±¡ï¼Œå¦‚æœä¸èƒ½åŒ¹é…è¿”å›Noneã€‚
``` python
ret = re.search('a', 'eva egon yuan').group()
print(ret) #ç»“æœ : 'a'
# å‡½æ•°ä¼šåœ¨å­—ç¬¦ä¸²å†…æŸ¥æ‰¾æ¨¡å¼åŒ¹é…,åªåˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ç„¶åè¿”å›ä¸€ä¸ªåŒ…å«åŒ¹é…ä¿¡æ¯çš„å¯¹è±¡,è¯¥å¯¹è±¡å¯ä»¥
# é€šè¿‡è°ƒç”¨group()æ–¹æ³•å¾—åˆ°åŒ¹é…çš„å­—ç¬¦ä¸²,å¦‚æœå­—ç¬¦ä¸²æ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å›Noneã€‚
```
**3. re.match(pattern, string, flags=0)**
ä»å­—ç¬¦ä¸²çš„å¼€å¤´åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚è¿”å›_sre.SRE_Matchå¯¹è±¡ï¼Œå¦‚æœä¸èƒ½åŒ¹é…è¿”å›Noneã€‚
``` python
ret = re.match('a', 'abc').group()  # åŒsearch,ä¸è¿‡å°½åœ¨å­—ç¬¦ä¸²å¼€å§‹å¤„è¿›è¡ŒåŒ¹é…
print(ret)
#ç»“æœ : 'a'
```
**4. re.split(pattern, string, maxsplit=0)**
é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å°†å­—ç¬¦ä¸²åˆ†ç¦»ã€‚å¦‚æœç”¨æ‹¬å·å°†æ­£åˆ™è¡¨è¾¾å¼æ‹¬èµ·æ¥ï¼Œé‚£ä¹ˆåŒ¹é…çš„å­—ç¬¦ä¸²ä¹Ÿä¼šè¢«åˆ—å…¥åˆ°listä¸­è¿”å›ã€‚maxsplitæ˜¯åˆ†ç¦»çš„æ¬¡æ•°ï¼Œmaxsplit=1åˆ†ç¦»ä¸€æ¬¡ï¼Œé»˜è®¤ä¸º0ï¼Œä¸é™åˆ¶æ¬¡æ•°ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸èƒ½åŒ¹é…ï¼Œå°†ä¼šè¿”å›æ•´ä¸ªå­—ç¬¦ä¸²çš„listã€‚

``` python
ret = re.split('[ab]', 'abcd')  # å…ˆæŒ‰'a'åˆ†å‰²å¾—åˆ°''å’Œ'bcd',åœ¨å¯¹''å’Œ'bcd'åˆ†åˆ«æŒ‰'b'åˆ†å‰²
print(ret)  # ['', '', 'cd']
```
**5. re.findall(pattern, string, flags=0)**
æ‰¾åˆ° RE åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªåˆ—è¡¨è¿”å›ã€‚è¿™ä¸ªåŒ¹é…æ˜¯ä»å·¦åˆ°å³æœ‰åºåœ°è¿”å›ã€‚å¦‚æœæ— åŒ¹é…ï¼Œè¿”å›ç©ºåˆ—è¡¨ã€‚
``` python
ret = re.findall('a', 'eva egon yuan')  # è¿”å›æ‰€æœ‰æ»¡è¶³åŒ¹é…æ¡ä»¶çš„ç»“æœ,æ”¾åœ¨åˆ—è¡¨é‡Œ
print(ret) #ç»“æœ : ['a', 'a']
```
**6. re.finditer(pattern, string, flags=0)**
æ‰¾åˆ° RE åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨è¿”å›ã€‚è¿™ä¸ªåŒ¹é…æ˜¯ä»å·¦åˆ°å³æœ‰åºåœ°è¿”å›ã€‚å¦‚æœæ— åŒ¹é…ï¼Œè¿”å›ç©ºåˆ—è¡¨ã€‚

``` python
import re
ret = re.finditer('\d', 'ds3sy4784a')   #finditerè¿”å›ä¸€ä¸ªå­˜æ”¾åŒ¹é…ç»“æœçš„è¿­ä»£å™¨
print(ret)  # <callable_iterator object at 0x10195f940>
print(next(ret).group())  #æŸ¥çœ‹ç¬¬ä¸€ä¸ªç»“æœ
print(next(ret).group())  #æŸ¥çœ‹ç¬¬äºŒä¸ªç»“æœ
print([i.group() for i in ret])  #æŸ¥çœ‹å‰©ä½™çš„å·¦å³ç»“æœ
Output:
<callable_iterator object at 0x032C85D0>
3
4
['7', '8', '4']
```
**7. re.sub(pattern, repl, string, count=0, flags=0)**
æ‰¾åˆ°åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶å°†å…¶ç”¨ä¸€ä¸ªä¸åŒçš„å­—ç¬¦ä¸²æ›¿æ¢ã€‚å¯é€‰å‚æ•° count æ˜¯æ¨¡å¼åŒ¹é…å¾Œæ›¿æ¢çš„æœ€å¤§æ¬¡æ•°ï¼›count å¿…é¡»æ˜¯éè´Ÿæ•´æ•°ã€‚ç¼ºçœå€¼æ˜¯ 0 è¡¨ç¤ºæ›¿æ¢æ‰€æœ‰çš„åŒ¹é…ã€‚å¦‚æœæ— åŒ¹é…ï¼Œå­—ç¬¦ä¸²å°†ä¼šæ— æ”¹å˜åœ°è¿”å›ã€‚

``` python
ret = re.sub('\d', 'H', 'eva3egon4yuan4', 1)#å°†æ•°å­—æ›¿æ¢æˆ'H'ï¼Œå‚æ•°1è¡¨ç¤ºåªæ›¿æ¢1ä¸ª
print(ret) #evaHegon4yuan4
```
**8. re.subn(pattern, repl, string, count=0, flags=0)**
ä¸re.subæ–¹æ³•ä½œç”¨ä¸€æ ·ï¼Œä½†è¿”å›çš„æ˜¯åŒ…å«æ–°å­—ç¬¦ä¸²å’Œæ›¿æ¢æ‰§è¡Œæ¬¡æ•°çš„ä¸¤å…ƒç»„ã€‚

``` python
ret = re.subn('\d', 'H', 'eva3egon4yuan4')#å°†æ•°å­—æ›¿æ¢æˆ'H'ï¼Œè¿”å›å…ƒç»„(æ›¿æ¢çš„ç»“æœ,æ›¿æ¢äº†å¤šå°‘æ¬¡)
print(ret)
Output:
('evaHegonHyuanH', 3)
```
åŸæ–‡å‚è€ƒï¼š[Regular expression operations](https://docs.python.org/3/library/re.html)
æ³¨æ„ï¼š
==1 findallçš„ä¼˜å…ˆçº§æŸ¥è¯¢ï¼š==

``` python
import re

ret = re.findall('www.(baidu|futuretechx).com', 'www.futuretechx.com')
print(ret)  # ['futuretechx']     è¿™æ˜¯å› ä¸ºfindallä¼šä¼˜å…ˆæŠŠåŒ¹é…ç»“æœç»„é‡Œå†…å®¹è¿”å›,å¦‚æœæƒ³è¦åŒ¹é…ç»“æœ,å–æ¶ˆæƒé™å³å¯

ret = re.findall('www.(?:baidu|futuretechx).com', 'www.futuretechx.com')
print(ret)  # ['www.futuretechx.com']
Output:
['futuretechx']
['www.futuretechx.com']
```
==2 splitçš„ä¼˜å…ˆçº§æŸ¥è¯¢==

``` python
ret=re.split("\d+","eva3egon4yuan")
print(ret) #ç»“æœ ï¼š ['eva', 'egon', 'yuan']

ret=re.split("(\d+)","eva3egon4yuan")
print(ret) #ç»“æœ ï¼š ['eva', '3', 'egon', '4', 'yuan']

#åœ¨åŒ¹é…éƒ¨åˆ†åŠ ä¸Šï¼ˆï¼‰ä¹‹åæ‰€åˆ‡å‡ºçš„ç»“æœæ˜¯ä¸åŒçš„ï¼Œ
#æ²¡æœ‰ï¼ˆï¼‰çš„æ²¡æœ‰ä¿ç•™æ‰€åŒ¹é…çš„é¡¹ï¼Œä½†æ˜¯æœ‰ï¼ˆï¼‰çš„å´èƒ½å¤Ÿä¿ç•™äº†åŒ¹é…çš„é¡¹ï¼Œ
#è¿™ä¸ªåœ¨æŸäº›éœ€è¦ä¿ç•™åŒ¹é…éƒ¨åˆ†çš„ä½¿ç”¨è¿‡ç¨‹æ˜¯éå¸¸é‡è¦çš„ã€‚
```
ç»ƒä¹ é¢˜ï¼š
1 æ ‡ç­¾åŒ¹é…

``` python
import re

ret = re.search("<(?P<tag_name>\w+)>\w+</(?P=tag_name)>","<h1>hello</h1>")
#è¿˜å¯ä»¥åœ¨åˆ†ç»„ä¸­åˆ©ç”¨?<name>çš„å½¢å¼ç»™åˆ†ç»„èµ·åå­—
#è·å–çš„åŒ¹é…ç»“æœå¯ä»¥ç›´æ¥ç”¨group('åå­—')æ‹¿åˆ°å¯¹åº”çš„å€¼
print(ret.group('tag_name'))  #ç»“æœ ï¼šh1
print(ret.group())  #ç»“æœ ï¼š<h1>hello</h1>

ret = re.search(r"<(\w+)>\w+</\1>","<h1>hello</h1>")
#å¦‚æœä¸ç»™ç»„èµ·åå­—ï¼Œä¹Ÿå¯ä»¥ç”¨\åºå·æ¥æ‰¾åˆ°å¯¹åº”çš„ç»„ï¼Œè¡¨ç¤ºè¦æ‰¾çš„å†…å®¹å’Œå‰é¢çš„ç»„å†…å®¹ä¸€è‡´
#è·å–çš„åŒ¹é…ç»“æœå¯ä»¥ç›´æ¥ç”¨group(åºå·)æ‹¿åˆ°å¯¹åº”çš„å€¼
print(ret.group(1))
print(ret.group())  #ç»“æœ ï¼š<h1>hello</h1>
Output:
h1
<h1>hello</h1>
h1
<h1>hello</h1>

ret = re.search("<(?P<tag_name>\w+)>(?P<context>\w+)</(?P=tag_name)>","<h1>hello</h1>")
print(ret.group('tag_name'))
print(ret.group('context'))
print(ret.group())
Output:
h1
hello
<h1>hello</h1>
```
2ã€åŒ¹é…æ•´æ•°

``` python
import re

ret=re.findall(r"\d+","1-2*(60+(-40.35/5)-(-4*3))")
print(ret) #['1', '2', '60', '40', '35', '5', '4', '3']
ret=re.findall(r"-?\d+\.\d*|(-?\d+)","1-2*(60+(-40.35/5)-(-4*3))")
print(ret) #['1', '-2', '60', '', '5', '-4', '3']
ret.remove("")
print(ret) #['1', '-2', '60', '5', '-4', '3']
```

3ã€æ•°å­—åŒ¹é… 
> 1ã€ åŒ¹é…ä¸€æ®µæ–‡æœ¬ä¸­çš„æ¯è¡Œçš„é‚®ç®±
     http://blog.csdn.net/make164492212/article/details/51656638
> 2ã€ åŒ¹é…ä¸€æ®µæ–‡æœ¬ä¸­çš„æ¯è¡Œçš„æ—¶é—´å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šâ€˜1990-07-12â€™ï¼›
	>    åˆ†åˆ«å–å‡º1å¹´çš„12ä¸ªæœˆï¼ˆ^(0?[1-9]|1[0-2])$ï¼‰ã€   
	>  ä¸€ä¸ªæœˆçš„31å¤©ï¼š^((0?[1-9])|((1|2)[0-9])|30|31)$
> 3ã€ åŒ¹é…qqå·ã€‚(è…¾è®¯QQå·ä»10000å¼€å§‹)  ï¼»1,9ï¼½[0,9]{4,}
> 4ã€ åŒ¹é…ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚       ^(-?\d+)(\.\d+)?$   æˆ–è€…  -?\d+\.?\d*
> 5ã€ åŒ¹é…æ±‰å­—ã€‚             ^[\u4e00-\u9fa5]{0,}$ 
> 6ã€ åŒ¹é…å‡ºæ‰€æœ‰æ•´æ•°

4ã€çˆ¬è™«ç»ƒä¹ 

``` python
import re
import json
from urllib.request import urlopen

def getPage(url):
    response = urlopen(url)
    return response.read().decode('utf-8')

def parsePage(s):
    com = re.compile(
        '<div class="item">.*?<div class="pic">.*?<em .*?>(?P<id>\d+).*?<span class="title">(?P<title>.*?)</span>'
        '.*?<span class="rating_num" .*?>(?P<rating_num>.*?)</span>.*?<span>(?P<comment_num>.*?)è¯„ä»·</span>', re.S)

    ret = com.finditer(s)
    for i in ret:
        yield {
            "id": i.group("id"),
            "title": i.group("title"),
            "rating_num": i.group("rating_num"),
            "comment_num": i.group("comment_num"),
        }


def main(num):
    url = 'https://movie.douban.com/top250?start=%s&filter=' % num
    response_html = getPage(url)
    ret = parsePage(response_html)
    print(ret)
    f = open("move_info7", "a", encoding="utf8")

    for obj in ret:
        print(obj)
        data = str(obj)
        f.write(data + "\n")

count = 0
for i in range(10):
    main(count)
    count += 25
```
æ€è·¯ï¼š
1 urlä»ç½‘é¡µä¸ŠæŠŠä»£ç æä¸‹æ¥
2 bytes decode â€”â€”> utf-8 ç½‘é¡µå†…å®¹å°±æ˜¯æˆ‘çš„å¾…åŒ¹é…å­—ç¬¦ä¸² ret = re.findall(æ­£åˆ™ï¼Œå¸¦åŒ¹é…çš„å­—ç¬¦ä¸²)  
3 retæ˜¯æ‰€æœ‰åŒ¹é…åˆ°çš„å†…å®¹ç»„æˆçš„åˆ—è¡¨
ç»“æœï¼šä¼šçˆ¬å–è±†ç“£top250ä¸ªç”µå½±ï¼Œç„¶åä¿å­˜åˆ°jasonæ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶çš„å†…å®¹ç±»ä¼¼è¿™æ ·çš„ï¼š
``` json
{"id": "1", "title": "è‚–ç”³å…‹çš„æ•‘èµ", "rating_num": "9.6", "comment_num": "1197203äºº"}
{"id": "2", "title": "éœ¸ç‹åˆ«å§¬", "rating_num": "9.6", "comment_num": "879286äºº"}
{"id": "3", "title": "è¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·", "rating_num": "9.4", "comment_num": "1102451äºº"}
{"id": "4", "title": "é˜¿ç”˜æ­£ä¼ ", "rating_num": "9.4", "comment_num": "943674äºº"}
{"id": "5", "title": "ç¾ä¸½äººç”Ÿ", "rating_num": "9.5", "comment_num": "551561äºº"}
{"id": "6", "title": "æ³°å¦å°¼å…‹å·", "rating_num": "9.3", "comment_num": "879550äºº"}
{"id": "7", "title": "åƒä¸åƒå¯»", "rating_num": "9.3", "comment_num": "872969äºº"}
{"id": "8", "title": "è¾›å¾·å‹’çš„åå•", "rating_num": "9.5", "comment_num": "495794äºº"}
{"id": "9", "title": "ç›—æ¢¦ç©ºé—´", "rating_num": "9.3", "comment_num": "962117äºº"}
{"id": "10", "title": "æœºå™¨äººæ€»åŠ¨å‘˜", "rating_num": "9.3", "comment_num": "637442äºº"}
{"id": "11", "title": "å¿ çŠ¬å…«å…¬çš„æ•…äº‹", "rating_num": "9.3", "comment_num": "621782äºº"}
{"id": "12", "title": "ä¸‰å‚»å¤§é—¹å®è±å", "rating_num": "9.2", "comment_num": "860609äºº"}
{"id": "13", "title": "æµ·ä¸Šé’¢ç´å¸ˆ", "rating_num": "9.2", "comment_num": "719303äºº"}
{"id": "14", "title": "æ”¾ç‰›ç­çš„æ˜¥å¤©", "rating_num": "9.2", "comment_num": "591340äºº"}
{"id": "15", "title": "å¤§è¯è¥¿æ¸¸ä¹‹å¤§åœ£å¨¶äº²", "rating_num": "9.2", "comment_num": "652023äºº"}
{"id": "16", "title": "æ¥šé—¨çš„ä¸–ç•Œ", "rating_num": "9.2", "comment_num": "632497äºº"}
{"id": "17", "title": "æ•™çˆ¶", "rating_num": "9.2", "comment_num": "436290äºº"}
{"id": "18", "title": "é¾™çŒ«", "rating_num": "9.1", "comment_num": "534644äºº"}
{"id": "19", "title": "æ˜Ÿé™…ç©¿è¶Š", "rating_num": "9.2", "comment_num": "648404äºº"}
```
flags è¯¦è§£ï¼š

> flagsæœ‰å¾ˆå¤šå¯é€‰å€¼ï¼š
re.I(IGNORECASE)å¿½ç•¥å¤§å°å†™ï¼Œæ‹¬å·å†…æ˜¯å®Œæ•´çš„å†™æ³•
re.M(MULTILINE)å¤šè¡Œæ¨¡å¼ï¼Œæ”¹å˜^å’Œ$çš„è¡Œä¸º
re.S(DOTALL)ç‚¹å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦
re.L(LOCALE)åšæœ¬åœ°åŒ–è¯†åˆ«çš„åŒ¹é…ï¼Œè¡¨ç¤ºç‰¹æ®Šå­—ç¬¦é›† \w, \W, \b, \B, \s, \S ä¾èµ–äºå½“å‰ç¯å¢ƒï¼Œä¸æ¨èä½¿ç”¨
re.U(UNICODE) ä½¿ç”¨\w \W \s \S \d \Dä½¿ç”¨å–å†³äºunicodeå®šä¹‰çš„å­—ç¬¦å±æ€§ã€‚åœ¨python3ä¸­é»˜è®¤ä½¿ç”¨è¯¥flag
re.X(VERBOSE)å†—é•¿æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹patternå­—ç¬¦ä¸²å¯ä»¥æ˜¯å¤šè¡Œçš„ï¼Œå¿½ç•¥ç©ºç™½å­—ç¬¦ï¼Œå¹¶å¯ä»¥æ·»åŠ æ³¨é‡Š